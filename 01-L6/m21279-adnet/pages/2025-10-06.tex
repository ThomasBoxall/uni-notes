\taughtsession{Lecture}{Spread Spectrum and Walsh Codes}{2025-10-06}{11:00}{Asim}

\section{Communication Channels}
There are two different types of Communications Channels (also sometimes referred to as \textit{Communication Media} or \textit{Transmission Media}).

\begin{define}
    \item[Guided Media] Wired (Bounded) Media (i.e Twisted Pair, Coaxial, Fibre Optic)
    \item[Unguided Media] Wireless Media (i.e. Microwave, Radio Wave, Cellular, Infrared, Satellite)
\end{define}

Within Guided Media, the electromagnetic waves are guided along a physical path. The medium can be considered to be \textit{point-to-point} if it provides a direct link between two devices and those two devices are the only devices sharing the medium.

Unguided media is the opposite - where the electromagnetic waves are not guided through any physical containment, rather they transmit through air, vacuum or seawater. 

The term \textit{Direct Link} is used to refer to a transmission path where the signal is transmitted directly from sender to receiver without any intermediate devices. This can apply to both guided and unguided media. A \textit{multipoint guided configuration} is a configuration such that more than two devices share the same medium. 

A transmission may be simplex, half duplex or full duplex.

\begin{define}
    \item[Simplex] a transmission in which signals are only transmitted in one direction; one station is the transmitter and the other is the receiver.
    \item[Half-Duplex] a transmission in which both stations can transmit and receive but only one can transmit at one time therefore
    \item[Full-Duplex] a transmission in which both stations can transmit and receive at the same time; which requires a medium is required for signals to be transmitted in both directions at the same time
\end{define}

In a full-duplex transmission system there may sometimes be an overlap in the frequency ranges used for each direction of transmission. This is sometimes acceptable and sometimes not - depending on the application. In any case, the overlap would be at the very edges of the frequency range; however this would still cause some interference.

\begin{extlink}
There is a diagram detailing the frequencies used for different unguided transmissions available both in the slides on Moodle \& in the textbook on page 109.
\end{extlink}

\section{Interference and Noise}
Often with transmissions - our signal may be interrupted in some way. This will alter the signal being transmitted which could change the data it represents - therefore garbling the resultant wave. Often this interference will come from \textit{noise}. 

\begin{define}
\item[Interference] The combination of two or more electromagnetic waveforms to form a resultant wave in which the displacement is either reinforced or cancelled
\item[Noise] An unwanted signal which is combined with desired signal 
\end{define}

\begin{figure}[H]
    \centering
    \begin{minipage}[H]{0.45\textwidth}
        \begin{figure}[H]
        \centering
        \begin{tikzpicture}[>=stealth]

            \draw[step=1cm,gray,very thin,dashed] (0,-1.5) grid (6,7.5);
            % resultant x axis
            \draw[->] (0, 0) -- (6, 0);
            % y axis
            \draw[->] (0, -1.5) -- (0, 1.25);
            \draw[->] (0, 1.75) -- (0, 4.25);
            \draw[->] (0, 4.75) -- (0, 7.5);
            % wave1 x axis
            \draw[->] (0,3) -- (6,3);
            % wave2 x axis
            \draw[->] (0,6) -- (6,6);


            %wave1 y axis markers
            \node at (-0.5, 5) {low};
            \node at (-0.5, 7) {high};
            
            %wave2 y axis markers
            \node at (-0.5, 2) {low};
            \node at (-0.5, 4) {high};
            
            % interfering wave brace
            \draw [decorate, decoration={brace, amplitude=8pt, raise=4pt}] 
                    (-0.7, 1.75) -- (-0.7, 7.25)
                    node [midway, left=12pt, rotate=90, anchor=south] {Interfering Waves};
            % resultant y axis markers
            \node at (-0.5, 1) {high};
            \node at (-0.5, -1) {low};
            \draw [decorate, decoration={brace, amplitude=8pt, raise=4pt}] 
                    (-0.7, -1.25) -- (-0.7, 1.25)
                    node [midway, left=12pt, rotate=90, anchor=south] {Resultant Wave};

            % interference 1
            \draw[themeBlue, thick, smooth, samples=100, domain=0:6] plot (\x, {0.5*(sin(\x * 180)+12)}); 
            \draw[themeBlue, thick, smooth, samples=100, domain=0:6] plot (\x, {0.5*(sin(\x * 180)+6)}); 
            \draw[themeBlue, thick, smooth, samples=100, domain=0:6] plot (\x, {(sin(\x * 180))}); 


        \end{tikzpicture}
        \caption{Constructive Interference}
        \end{figure}
    \end{minipage}\hfill
    \begin{minipage}[H]{0.45\textwidth}
        \begin{figure}[H]
        \centering
        \begin{tikzpicture}[>=stealth]

            \draw[step=1cm,gray,very thin,dashed] (0,-1.5) grid (6,7.5);
            % resultant x axis
            \draw[->] (0, 0) -- (6, 0);
            % y axis
            \draw[->] (0, -1.5) -- (0, 1.25);
            \draw[->] (0, 1.75) -- (0, 4.25);
            \draw[->] (0, 4.75) -- (0, 7.5);
            % wave1 x axis
            \draw[->] (0,3) -- (6,3);
            % wave2 x axis
            \draw[->] (0,6) -- (6,6);


            %wave1 y axis markers
            \node at (-0.5, 5) {low};
            \node at (-0.5, 7) {high};
            
            %wave2 y axis markers
            \node at (-0.5, 2) {low};
            \node at (-0.5, 4) {high};
            
            % interfering wave brace
            \draw [decorate, decoration={brace, amplitude=8pt, raise=4pt}] 
                    (-0.7, 1.75) -- (-0.7, 7.25)
                    node [midway, left=12pt, rotate=90, anchor=south] {Interfering Waves};
            % resultant y axis markers
            \node at (-0.5, 1) {high};
            \node at (-0.5, -1) {low};
            \draw [decorate, decoration={brace, amplitude=8pt, raise=4pt}] 
                    (-0.7, -1.25) -- (-0.7, 1.25)
                    node [midway, left=12pt, rotate=90, anchor=south] {Resultant Wave};

            % interference 1
            \draw[themeBlue, thick, smooth, samples=100, domain=0:6] plot (\x, {(sin(\x * 180)+6)}); 
            \draw[themeBlue, thick, smooth, samples=100, domain=0:6] plot (\x, {(-sin(\x * 180)+3)}); 
            \draw[themeBlue, thick] (0,0) -- (6,0);

        \end{tikzpicture}
        \caption{Destructive Interference}
        \end{figure}
    \end{minipage}
\end{figure}

As we can see in the above figure, where we have two waves which are of the same phase interfering with each other - they will \textit{interfere constructively} to increase the amplitude of the resultant wave. However where two waves in opposite phase interfere with each other - they will \textit{interfere destructively} to effectively cancel each other our and the resultant wave has no amplitude.

For any data transmission, the received signal will consist of the transmitted signal, modified by the various distortions used by the transmission system, plus additional unwanted signals that are inserted somewhere between transmission and reception (which is referred to as \textit{noise}). 

Noise can be divided into four categories:
\begin{itemize}
    \item Thermal Noise
    \item Intermodulation Noise
    \item Crosstalk
    \item Impulse Noise
\end{itemize}

\section{Basic Definitions}
\begin{define}
\item[Data Rate] The rate, in bits per second (bps), at which data can be communicated
\item[Error] The reception of a 1 where 0 was transmitted, or the reception of a 0 when a 1 was transmitted
\item[Error Rate] The rate at which errors occur
\item[Frequency Bandwdith] The difference between the upper and lower frequencies in a continuous band of frequencies
\item[Channel Capacity] The maximum rate at which information can be transmitted through a communication channel
\item[Signal to Noise Ration (SNR)] The ratio of the signal power to the noise power, measured in Decibels $\displaystyle 10\log_{10} \frac{\textrm{signal\ power}}{\textrm{noise\ power}}$
\end{define}

The \textit{Channel Capacity} can be calculated using:
\[C = 2B \log_2M\]
Where $C$ is the channel capacity; $B$ is the bandwidth; $M$ is the signal or voltage levels. 

The Nyquist Bandwidth Theory stipulates that if the rate of signal transmission is $2B$ then a signal with frequencies no greater than $B$ is sufficient to carry the signal rate. The converse is also true. This limitation is due to the effect of intersymbol interference, which is produced by delay distortion. This is in essence based on the Nyquist Sampling Theorem (flashback to A-Level Electronics). 

From this we can see that permitting all other things being equal, when we double the bandwidth - we double the error rate. The error rate then only gets worse as we increase the data rate because a higher data rate will mean the bits are shorter so more bits are affected by a given pattern of noise. Mathematician \textit{Claude Shannon} tied these into a formula:
\[C = B \log_2 (1+ SNR)\]
Where $C$ is the capacity of the channel in bps and $B$ is the bandwidth of the channel in Hertz. 

\section{Multiplexing}
\begin{define}
\item[Multiplexing] A technique that allows the simultaneous transmission of multiple signals through the same channel or link; several signals are combined into a single composite signal
\end{define}

\subsection{Frequency Division Multiplexing}
In Frequency Division Multiplexing (FDM), the different message signals are modulated onto different carrier frequencies. This then means the signals being transmitted are separate from each other in the frequency domain. These modulated signals are then combined together to form the composite signal and this signal is sent over the shared medium or channel. To avoid the interference between the different message signals, a guard band is also kept between the message signals.

On the transmitter end, the signals to be transmitted are modulated onto the different carrier frequencies. Then on the receiver end - the frequencies first pass through a Band Pass Filter (definition not required for this module), then through the demodulator, then finally through a low pass filter (again, definition not needed in this module). The band pass filter is used to separate the specific signal from the composite signal, and the low pass filter is used to filter out the higher frequencies introduced as part of the FDM process.

\subsection{Time Division Multiplexing}
In Time Division Multiplexing (TDM), the channel is divided into several time slots, and each signal allocated during it's time slot. As a result - several signals share the channel without interfering with each other. 

\section{Spread Spectrum}
When transmitting our analog signals (whether these originated as digital or analog), we can spread the signal over a wider bandwidth to avoid jamming and frequency interception. 

Spread Spectrum is a technique used by military and intelligence applications which is also used in Wireless and Cordless networks. There are a number of different techniques which can be used, we will explore 3 of them. 

\begin{define}
    \item[Pseudorandom Noise] (PN) is a deterministic sequence of bits which satisfies one or more of the standard tests for statistical randomness while being repeatable after a period
\end{define}

\subsection{Frequency Hopping Spread Spectrum}
In Frequency Hopping Spread Spectrum (FHSS), the signal is broadcast over a number of different radio frequencies, and the frequency used is changed at a fixed intervals which are generally extremely short (i.e. $1 ms$). The receiver will hop between the different frequencies used in sync with the transmitter.

If the transmission is compromised, then the attacker would only hear unintelligible blips of the transmission. It would also thwart attempts to jam the signal as the attacker would only be able to block a few bits of the signal. 

FHSS transmission systems tend to work with the binary data being fed into a modulator using a digital-to-analog encoding scheme (for example FSK or BPSK). The resultant signal is centred in a frequency. A PN source serves as an index into a table of frequencies; this is the spreading code. Each $k$ bits of the PN source specifies one of the carrier frequencies. At each pre-agreed interval, a new carrier frequency is selected. This frequency is then modulated by the signal produced from the initial modulator to produce a new signal with the same shape, but now centred on the selected carrier frequency.

On reception - the spread spectrum signal is demodulated using the same sequence of frequencies derived from the PN source, and then demodulated to produce the output data. 

\subsection{Direct Sequence Spread Spectrum}
Direct Sequence Spread Spectrum (DSSS) works by encoding a single bit to be transmitted (i.e. $1$) as a multi-but sequence (i.e. $0110$) using a spreading code. The \textit{spreading code} spreads the signal across a wider frequency band in direct proportion to the number of bits used. Which means that a 4-bit spreading code spreads 1-bit of signal across a frequency band which is 4 times greater than a 1-bit spreading code. Of course, it doesn't have to be a 4-bit spreading code; it could be 10-bit or 20-bit. 

A common method for encoding DSS is to combine the digital data input signal with a \textit{Pseudorandom Noise (PN)} sequence (the individual bits within are called \textit{chips}). The combined output signal is then referred to as a \textit{chip sequence}.

In reality, this encoding process works by combining the digital data input signal with the Chip Sequence using an Exclusive Or (XOR) operation. 

\begin{align*}
    0 \oplus 0 &= 0\\
    0 \oplus 1 &= 1\\
    1 \oplus 0 &= 1\\
    1 \oplus 1 &= 0
\end{align*}

This produces a \textit{combination bit stream} which has the data rate of the spreading code sequence, so therefore has a higher bandwidth than the information stream. 

\begin{example}{DSSS}
If we take the first bit we want to transmit, $0$, and the first four bits of PN sequence $0110$; we then perform the XOR operation for each of them:
\begin{align*}
    0 \oplus 0 &= 0\\
    0 \oplus 1 &= 1\\
    0 \oplus 1 &= 1\\
    0 \oplus 0 &= 0
\end{align*}
This gives us the transmitted spread-sequence representing our first bit: $0110$. This process is then continued for all bits to be transmitted.

On the receiving end, the receiver has the same PN sequence so they can perform an XOR function on the received signal and PN sequence:
\begin{align*}
    0 \oplus 0 &= 0\\
    1 \oplus 1 &= 0\\
    1 \oplus 1 &= 0\\
    0 \oplus 0 &= 0
\end{align*}
The un-spread single bit output is then the output of the XOR. In this case, that would be $0$. Obviously, this decoding process is repeated for as many bits as needed.
\end{example}

\begin{extlink}
There is an alternative representation of DSSS using a graph to represent the different signals in the Slides available on Moodle. 
\end{extlink}

\subsection{Code Division Multiple Access Spread Spectrum}
\textit{Code Division Multiple Access} (CDMA) is a multiplexing technique used with spread spectrum.

To understand how CDMA works, we first have to understand how \textit{Walsh Code} works. Walsh Code is a matrix from which codes can be taken by reading the rows of the matrix. The Walsh matrix starts with the general structure:
\[W_1=(-1)\]
We can then double $n$ to provide larger matrices, for the events in which we need longer sequences of chip codes.
\begin{equation*}
W_{2n} = W_2 =
\begin{pmatrix}
    W_1 & W_1\\
    W_1 & \overline{W_1}
\end{pmatrix}
=
\begin{pmatrix}
    -1 & -1\\
    -1 & +1
\end{pmatrix}
\end{equation*}
Obviously, this can be taken further to see a $4\times4$ matrix which is a common size we will interact with in this module.
\begin{equation*}
W_{2n} = W_4 = 
\begin{pmatrix}
    W_2 & W_2 \\
    W_2 & \overline{W_2}
\end{pmatrix}
=
\begin{pmatrix}
    -1 & -1 & -1 & -1\\
    -1 & +1 & -1 & +1\\
    -1 & -1 & +1 & +1\\
    -1 & +1 & +1 & -1
\end{pmatrix}
\end{equation*}

CDMA works by taking the data signal, with a bit-rate $R$, and selecting a unique code of $n$ chips according to the Walsh Matrix; for example \textit{row 1 for a; row 2 for b; etc}. Then if a the user, $k$, sends a 1 - the transmitter sends the chip code $c_k$; alternatively if the user $k$ sends a 0 - the transmitter sends the chip code $\overline{c_k}$ (which may also be represented in this module as $c_k'$).

The signal to be transmitted is the built by summing the ``columns'' of chip codes (i.e. all first indexes summed for A, B, C \& D; all second indexes summed for A, B, C \& D; etc; in a situation where 4 signals are being transmitted together). The receiver then decodes this signal by performing inner-product-multiplication for the user $k$. This works by them taking the original Chip Code (not the inverted chip where a -1 has been transmitted) and multiplying each element with the corresponding element in the received signal (i.e. first element of chip code multiplied with first received bit, etc). The output from these multiplications are then summed together, and where the result is the number of bits in the chip code, $n$: a 1 was transmitted; and where the result is $-n$: a 0 was transmitted. 

\begin{example}{CDMA}
If we take the following users to have the following Chip Codes:
\begin{itemize}
    \item User A Chip Codes: $(-1, -1, -1, -1)$
    \item User B Chip Codes: $(-1, +1, -1, +1)$
    \item User C Chip Codes: $(-1, -1, +1, +1)$
    \item User D Chip Codes: $(-1, +1, +1, -1)$
\end{itemize}

\textbf{Case 1}

User A sends 1, user B sends 1, user C sends 1, and user D sends 0 (represented as -1).

We sum their chip codes, for A, B, and C - these are as specified above; however for D we need to invert the chip codes because D is transmitting a 0 (-1).
\begin{align*}
A + B + C + D' &= (-1, -1, -1, -1) + (-1, +1, -1, +1) + (-1, -1, +1, +1)+ (+1, -1, -1, +1)\\
&= (-2, -2, -2, 2)
\end{align*}

The receiver will receive this and perform an inner product multiplication using the Chip Code of A.
\begin{align*}
f &= (-2, -2, -2, 2) \times (-1, -1, -1, -1)\\
&= (-2 \times -1) + (-2 \times -1) + (-2 \times -1) + (2 \times -1)\\
&= 2 + 2 + 2 - 2\\
&= 4
\end{align*}
Which therefore confirms that A is sending a bit 1.

\textbf{Case 2}

User A sends 0 (-1), user B sends 1, user C sends 1, and user D sends 0 (-1). 

We sum their chip codes, this time inverting A and D because they're transmitting 0s.
\begin{align*}
A + B + C + D' &= (+1, +1, +1, +1) + (-1, +1, -1, +1) + (-1, -1, +1, +1)+ (+1, -1, -1, +1)\\
&= (0, 0, 0, 4)
\end{align*}

Then we can find what the receiver decodes using A's chip code.:
\begin{align*}
f &= (0, 0, 0, 4) \times (-1, -1, -1, -1,)\\
&= (0 \times -1) + (0 \times -1) + (0 \times -1) + (4 \times -1)\\
&= 0 + 0 + 0 + -4\\
&= -4
\end{align*}
As this results to $-n$ (remembering $n$ is the length of the users chip codes) - we know that A transforms to bit 0. 
\end{example}